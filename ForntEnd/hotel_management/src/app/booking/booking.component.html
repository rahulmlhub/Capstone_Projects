<app-navbar></app-navbar>
<div class="box">
  <div class="box-form">
    <!-- booking-form.component.html -->
    <div class="btn">
        <!-- <button class="btn btn-primary " routerLink="/booking-list">View Bookings</button> -->
    </div>
    &nbsp;
    <div class="booking-div">
    <form (ngSubmit)="saveBooking()">
        <table>
            <!-- <tr>
                <td><label for="bookingId">Booking ID:</label></td>
                <td><input type="text" class="form-control" id="bookingId" name="bookingId" [(ngModel)]="booking.bookingId" required></td>
            </tr> -->
            <tr>
                <td><label for="guestId">Guest</label></td>
                <td>
                    <select id="guestId" name="guestId" class="form-control" [(ngModel)]="booking.guestId" required>
                        <option value="" disabled selected>Select Guest</option>
                        <option *ngFor="let guest of guests" [value]="guest.guestId">{{ guest.guestId }} ({{ guest.name}})</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label for="hotelId">Hotel</label></td>
                <td>
                    <select id="hotelId" class="form-control" name="hotelId" [(ngModel)]="booking.hotelId" required>
                        <option value="" disabled selected>Select Hotel</option>
                        <option *ngFor="let hotel of hotels" [value]="hotel.hotelId">{{ hotel.hotelId }}</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td><label for="numberOfGuest">Number Of Guest:</label></td>
                <td><input type="number" class="form-control" id="numberOfGuest" name="numberOfGuest" [(ngModel)]="booking.numberOfGuest" required></td>
            </tr>
            <tr>
                <td><label for="checkIn">Check-In Date:</label></td>
                <input type="date" id="checkIn" name="checkIn" class="form-control" [min]="minDate" [max]="maxDate"  [(ngModel)]="booking.checkIn" required>
            </tr>
            <tr>
                <td><label for="checkOut">Check-Out Date:</label></td>
                <input type="date" id="checkOut" name="checkOut" class="form-control" [min]="minDate" [max]="maxDate"  [(ngModel)]="booking.checkOut" required>
            </tr>
            <tr>
                <td colspan="2">
                    <button type="submit" class="btn btn-primary btn-sm">Book</button>
                </td>
            </tr>
        </table>
    </form>
</div>
</div>


<div class="list-box">

  
<div class="btn">
</div>
<div>
  <table class="table">
      <thead>
          <tr>
              <th>Booking Id</th>
              <th>Hotel Name</th>
              <th>Guest Name</th>
              <th>Number Of Guest</th>
              <th>Check-In Date</th>
              <th>Check-Out Date</th>
              <th>Action</th>
          </tr>
      </thead>
      <tbody>
          <ng-container *ngFor="let booking of bookingLists">
              <tr *ngIf="!booking.isEditing; else editRow">
                  <td>{{ booking.bookingId }}</td>
                  <td>{{ booking.hotelName }}</td>
                  <td>{{ booking.guestName }}</td>
                  <td>{{ booking.numberOfGuest }}</td>
                  <td>{{ booking.checkIn | date }}</td>
                  <td>{{ booking.checkOut | date }}</td>
                  <td>
                      <!-- <button (click)="toggleEdit(booking)" class="btn btn-primary btn-sm"><i class="fa-light fa-pen-to-square"></i></button> -->
                      <i class="fa-solid fa-pen-to-square" (click)="toggleEdit(booking)" ></i>
                      &nbsp;
                      <!-- <button (click)="deleteBooking(booking.bookingId)" class="btn btn-primary btn-sm"><i class="fa-solid fa-trash"></i></button> -->
                      <i class="fa-solid fa-trash delete-icon" (click)="deleteBooking(booking.bookingId)"></i>
                    </td>
              </tr>
              <ng-template #editRow>
                  <tr>
                    <td><input type="text" [(ngModel)]="booking.bookingId" disabled class="small-input"></td>
                    <td><input type="text" [(ngModel)]="booking.hotelId" disabled class="small-input"></td>
                    <td><input type="text" [(ngModel)]="booking.guestId" disabled class="small-input"></td>
                    <td><input type="text" [(ngModel)]="booking.numberOfGuest" class="small-input"></td>                    
                      <td><input type="date" [(ngModel)]="booking.checkIn"></td>
                      <td><input type="date" [(ngModel)]="booking.checkOut"></td>
                      <td>
                          <!-- <button (click)="updateBooking(booking)" class="btn btn-primary btn-sm">Save</button> -->
                          <i class="fa-solid fa-floppy-disk" (click)="updateBooking(booking)"></i>
                          &nbsp;
                          <!-- <button (click)="cancelEdit(booking)" class="btn btn-primary btn-sm">Cancel</button> -->
                          <i class="fa-solid fa-xmark" (click)="cancelEdit(booking)"></i>
                      </td>
                  </tr>
              </ng-template>
          </ng-container>
      </tbody>
  </table>
</div>

</div>

</div>